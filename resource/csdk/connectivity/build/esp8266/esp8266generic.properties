#Source directories 
SDIR_ESP_CORE_1 = $(ESP8266_DIR)/hardware/esp8266com/esp8266/cores/esp8266
SDIR_ESP_CORE_2 = $(ESP8266_DIR)/hardware/esp8266com/esp8266/variants/generic
SDIR_ESP_CORE_3 = $(ESP8266_DIR)/hardware/esp8266com/esp8266/tools/sdk
SDIR_ESP_CORE_4 = $(ESP8266_DIR)/hardware/esp8266com/esp8266/tools/sdk/include
SDIR_ESP_SPI = $(ESP8266_DIR)/hardware/esp8266com/esp8266/libraries/SPI
SDIR_ESP_ETH = $(ESP8266_DIR)/hardware/esp8266com/esp8266/libraries/Ethernet/src
SDIR_ESP_ETH_UTIL = $(ESP8266_DIR)/hardware/esp8266com/esp8266/libraries/Ethernet/src/utility
SDIR_ESP_WIFI = $(ESP8266_DIR)/hardware/esp8266com/esp8266/libraries/ESP8266WIFI/src
SDIR_ESP_WIFI_INC = $(ESP8266_DIR)/hardware/esp8266com/esp8266/libraries/ESP8266WIFI/src/inc
SDIR_ESP_TIME = $(ESP8266_DIR)/hardware/esp8266com/esp8266/libraries/Time/Time

SDIR_ESP_PLATFORM = $(SDIR_ESP_CORE_1):$(SDIR_ESP_CORE_2):$(SDIR_ESP_CORE_3):$(SDIR_ESP_CORE_4):$(SDIR_ESP_SPI):\
                        $(SDIR_ESP_TIME)

#include directories
IDIR_ESP_CORE_1 = $(ESP8266_DIR)/hardware/esp8266com/esp8266/cores/esp8266
IDIR_ESP_CORE_2 = $(ESP8266_DIR)/hardware/esp8266com/esp8266/tools/sdk
IDIR_ESP_CORE_3 = $(ESP8266_DIR)/hardware/esp8266com/esp8266/tools/sdk/lib
IDIR_ESP_CORE_4 = $(ESP8266_DIR)/hardware/esp8266com/esp8266/tools/sdk/include
IDIR_ESP_CORE_5 = $(ESP8266_DIR)/hardware/esp8266com/esp8266/variants/generic
IDIR_ESP_SPI = $(ESP8266_DIR)/hardware/esp8266com/esp8266/libraries/SPI
IDIR_ESP_ETH = $(ESP8266_DIR)/hardware/esp8266com/esp8266/libraries/Ethernet/src
IDIR_ESP_ETH_UTIL = $(ESP8266_DIR)/hardware/esp8266com/esp8266/libraries/Ethernet/src/utility
INCD_ESP_WIFI = $(ESP8266_DIR)/hardware/esp8266com/esp8266/libraries/ESP8266WIFI/src
INCD_ESP_WIFI_INC = $(ESP8266_DIR)/hardware/esp8266com/esp8266/libraries/ESP8266WIFI/src/inc
INCD_ESP_TIME = $(ESP8266_DIR)/hardware/esp8266com/esp8266/libraries/Time/Time


INC_DIR_PLATFORM = -I$(IDIR_ESP_CORE_1) -I$(IDIR_ESP_CORE_2) -I$(IDIR_ESP_CORE_3) -I$(IDIR_ESP_CORE_4) -I$(IDIR_ESP_CORE_5) \
                    -I$(IDIR_ESP_SPI) -I$(INCD_ESP_TIME)

#Compiler/Linker flags
CFLAGS_PLATFORM = -c -Wpointer-arith -Wno-implicit-function-declaration -Wl,-EL -fno-inline-functions -nostdlib -mlongcalls -mtext-section- \
                   literals -falign-functions=4 -std=gnu99 -U__STRICT_ANSI__ -MMD -ffunction-sections -fdata-sections -g -D__ets__ \
	          -DICACHE_FLASH -DF_CPU=80000000L -DARDUINO=168 -DESP8266WIFI -DWITH_ESP8266 -D__ESP8266__ -DARDUINO_ESP8266_ESP01 \
                  -DARDUINO_ARCH_ESP8266 -DESP8266

#Compilers
ESP8266_TOOLS_DIR = $(ESP8266_DIR)/hardware/esp8266com/esp8266/tools
CXX=$(ESP8266_TOOLS_DIR)/xtensa-lx106-elf/bin/xtensa-lx106-elf-g++
CC=$(ESP8266_TOOLS_DIR)/xtensa-lx106-elf/bin/xtensa-lx106-elf-gcc
AR=$(ESP8266_TOOLS_DIR)/xtensa-lx106-elf/bin/xtensa-lx106-elf-ar
RANLIB=$(ESP8266_TOOLS_DIR)/xtensa-lx106-elf/bin/xtensa-lx106-elf-ranlib
ESP_PROGRAMMER=$(ESP8266_TOOLS_DIR)/esptool/esptool

#Needed object files
CORE_COBJ = generic_cont_util.o generic_core_esp8266_eboot_command.o generic_core_esp8266_flash_utils.o generic_core_esp8266_i2s.o \
            generic_core_esp8266_noniso.o generic_core_esp8266_phy.o generic_core_esp8266_postmortem.o generic_core_esp8266_si2c.o \
            generic_core_esp8266_timer.o generic_core_esp8266_wiring.o generic_core_esp8266_wiring_analog.o \
            generic_core_esp8266_wiring_digital.o generic_core_esp8266_wiring_pulse.o generic_core_esp8266_wiring_pwm.o \
            generic_core_esp8266_wiring_shift.o generic_heap.o generic_libc_replacements.o generic_time.o generic_uart.o \
            generic_umm_malloc.o generic_cdecode.o generic_cdecode.o generic_spiffs_cache.o generic_spiffs_check.o generic_spiffs_gc.o \
            generic_spiffs_hydrogen.o generic_spiffs_nucleus.o
CORE_CPPOBJ = generic_Esp.o generic_FS.o generic_HardwareSerial.o generic_IPAddress.o generic_MD5Builder.o generic_Print.o \
              generic_Stream.o generic_StreamString.o generic_Tone.o generic_Updater.o generic_WMath.o generic_WString.o \
              generic_abi.o generic_base64.o generic_cbuf.o generic_core_esp8266_main.o generic_debug.o generic_pgmspace.o \
              generic_spiffs_api.o generic_spiffs_hal.o
WIRE_OBJ = generic_Wire.o
WIFI_OBJ = generic_ESP8266WiFi.o generic_ESP8266WiFiAP.o generic_ESP8266WiFiGeneric.o generic_ESP8266WiFiMulti.o generic_ESP8266WiFiSTA.o \
           generic_ESP8266WiFiScan.o generic_WiFiClient.o generic_WiFiClientSecure.o generic_WiFiServer.o generic_WiFiUdp.o
MDNS_OBJ = generic_ESP8266mDNS.o
SPI_OBJ = generic_SPI.o
WEBSERVER_OBJ = generic_ESP8266WebServer.o generic_Parsing.o
TIME_OBJ = generic_Time.o

PLATFORM_OBJS = $(CORE_COBJ) $(CORE_CPPOBJ) $(WIRE_OBJ) $(WIFI_CPPOBJ) $(MDNS_OBJ) $(SPI_OBJ) $(WEBSERVER_OBJ) $(TIME_OBJ)

#Include sources/objects corresponding to WiFi
ifeq ($(ESP8266WIFI),1)
    INC_DIR_PLATFORM += -I$(INCD_ESP_WIFI) -I$(INCD_ESP_WIFI_INC)
    SDIR_ARD_PLATFORM += :$(SDIR_ESP_WIFI):$(SDIR_ESP_WIFI_INC)
    PLATFORM_OBJS += $(WIFI_COBJ)
endif

